<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∏‡•á‡§µ‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    .stat-card { cursor: pointer; transition: all 0.3s ease; }
    .stat-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
    .big-search-section { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px; }
    .big-search-container { display: flex; gap: 15px; max-width: 800px; margin: 0 auto; }
    .big-search-input { flex: 1; padding: 15px 20px; font-size: 18px; border: 2px solid #e0e0e0; border-radius: 8px; }
    .big-search-input:focus { border-color: #2196F3; outline: none; }
    .big-search-btn { padding: 15px 40px; font-size: 18px; background: #2196F3; color: white; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 10px; }
    .big-search-btn:hover { background: #1976D2; }
    .data-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 10000; }
    .data-modal.active { display: flex; }
    .data-modal-content { background: white; width: 90%; max-width: 1200px; max-height: 85vh; overflow-y: auto; border-radius: 12px; padding: 30px; }
    .data-list { display: grid; gap: 15px; margin-top: 20px; }
    .data-item { background: #f5f5f5; padding: 20px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
    .data-item:hover { background: #e8f4f8; transform: translateX(5px); }
    
    .village-details { display: grid; gap: 25px; }
    .detail-section { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 12px; color: white; }
    .detail-section h4 { color: white; margin-bottom: 20px; font-size: 20px; display: flex; align-items: center; gap: 10px; }
    .detail-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
    .detail-item { background: rgba(255,255,255,0.95); padding: 20px; border-radius: 10px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .detail-label { font-size: 13px; color: #666; text-transform: uppercase; font-weight: 600; display: block; margin-bottom: 10px; }
    .detail-value { font-size: 28px; color: #333; font-weight: 700; display: block; }
    
    .info-cards { display: grid; gap: 15px; }
    .info-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .info-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 2px solid #f0f0f0; }
    .info-card-title { font-size: 18px; font-weight: 700; color: #333; display: flex; align-items: center; gap: 10px; }
    .info-card-body { display: grid; gap: 12px; }
    .info-row { background: #f8f9fa; padding: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; transition: all 0.2s ease; }
    .info-row:hover { background: #e3f2fd; transform: translateX(5px); }
    .info-row-main { font-weight: 600; color: #333; flex: 1; }
    .info-row-badges { display: flex; gap: 10px; align-items: center; }
    
    .resource-icon-large { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white; }
    .resource-icon-large.water { background: linear-gradient(135deg, #4fc3f7, #0288d1); }
    .resource-icon-large.electricity { background: linear-gradient(135deg, #ffd54f, #f57c00); }
    .resource-icon-large.road { background: linear-gradient(135deg, #90a4ae, #546e7a); }
    .resource-icon-large.health { background: linear-gradient(135deg, #ef5350, #c62828); }
    .resource-icon-large.education { background: linear-gradient(135deg, #ab47bc, #7b1fa2); }
    
    .quality-badge { padding: 6px 14px; border-radius: 20px; font-weight: 600; font-size: 13px; }
    .quality-badge.good { background: #c8e6c9; color: #2e7d32; }
    .quality-badge.average { background: #ffe082; color: #f57c00; }
    .quality-badge.poor { background: #ffcdd2; color: #c62828; }
    
    .priority-badge { padding: 6px 14px; border-radius: 20px; font-weight: 600; font-size: 13px; }
    .priority-badge.urgent { background: #ffcdd2; color: #c62828; }
    .priority-badge.high { background: #ffe082; color: #f57c00; }
    .priority-badge.medium { background: #fff9c4; color: #f9a825; }
    .priority-badge.low { background: #c8e6c9; color: #2e7d32; }
    
    .large-modal { width: 95%; max-width: 1200px; }
    .resource-card { cursor: pointer; transition: all 0.3s ease; }
    .resource-card:hover { transform: scale(1.05); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
    
    /* Table Styles */
    .resource-distribution-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    .resource-distribution-table thead tr { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
    .resource-distribution-table th { padding: 15px; text-align: left; font-weight: 700; }
    .resource-distribution-table td { padding: 15px; border-bottom: 1px solid #eee; }
    .resource-distribution-table tbody tr { transition: background 0.2s ease; }
    .resource-distribution-table tbody tr:hover { background: #f8f9fa; cursor: pointer; }
    
    .distribution-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px; text-align: center; margin-bottom: 20px; }
    .distribution-header h2 { margin: 0 0 10px 0; font-size: 28px; }
    .distribution-header p { margin: 0; opacity: 0.9; }
    .distribution-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
    .distribution-stat { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center; }
    .distribution-stat-number { font-size: 32px; font-weight: 700; color: #2196F3; margin: 10px 0; }
    .distribution-stat-label { color: #666; font-size: 14px; }
  </style>
</head>
<body>
  <nav class="top-nav">
    <div class="nav-container">
      <div class="nav-left">
        <div class="logo-container">
          <img src="mountain.png" alt="Logo" class="logo-icon">
          <span class="logo-text">‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∏‡•á‡§µ‡§æ</span>
        </div>
      </div>
      <div class="nav-center">
        <div class="role-switcher">
          <div class="switcher-track">
            <div class="switcher-thumb"></div>
            <div class="switcher-options">
              <input type="radio" id="pradhanMode" name="dashboardMode" value="pradhan" checked>
              <label for="pradhanMode" class="switcher-label">
                <i class="fas fa-crown"></i>
                <span>‡§™‡•ç‡§∞‡§ß‡§æ‡§® ‡§µ‡•ç‡§Ø‡•Ç</span>
              </label>
              <input type="radio" id="villagerMode" name="dashboardMode" value="villager">
              <label for="villagerMode" class="switcher-label">
                <i class="fas fa-user"></i>
                <span>‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§µ‡•ç‡§Ø‡•Ç</span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="nav-right">
        <button class="nav-btn notification-btn">
          <i class="fas fa-bell"></i>
          <span class="notification-badge" id="notificationBadge">5</span>
        </button>
        <div class="user-menu">
          <button class="user-btn" id="userMenuBtn">
            <div class="user-avatar" id="userAvatar">
              <i class="fas fa-crown"></i>
            </div>
            <span class="user-name" id="userName">‡§™‡•ç‡§∞‡§ß‡§æ‡§® ‡§ú‡•Ä</span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="user-dropdown" id="userDropdown">
            <a href="#" class="dropdown-item"><i class="fas fa-user"></i> ‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤</a>
            <a href="#" class="dropdown-item"><i class="fas fa-cog"></i> ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</a>
            <div class="dropdown-divider"></div>
            <a href="index.html" class="dropdown-item logout"><i class="fas fa-sign-out-alt"></i> ‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü</a>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <main class="main-content">
    <section class="dashboard-welcome">
      <div class="welcome-content">
        <h1 class="welcome-title" id="welcomeTitle">‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§™‡•ç‡§∞‡§ß‡§æ‡§® ‡§ú‡•Ä! üôè</h1>
        <p class="welcome-subtitle" id="welcomeSubtitle">‡§Ü‡§™‡§ï‡•á ‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§î‡§∞ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°</p>
      </div>
      <div class="welcome-actions">
        <button class="primary-btn" onclick="handlePrimaryAction()">
          <i class="fas fa-plus"></i>
          <span id="primaryActionText">‡§®‡§Ø‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</span>
        </button>
      </div>
    </section>

    <section class="big-search-section" id="bigSearchSection" style="display: none;">
      <h2 style="text-align: center; margin-bottom: 20px; color: #333;">üîç ‡§Ö‡§™‡§®‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ñ‡•ã‡§ú‡•á‡§Ç</h2>
      <div class="big-search-container">
        <input type="text" id="bigVillageSearch" class="big-search-input" placeholder="‡§ó‡§æ‡§Ç‡§µ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§Ø‡§æ ‡§ï‡•ã‡§° ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç...">
        <button class="big-search-btn" onclick="bigSearchVillage()">
          <i class="fas fa-search"></i> ‡§ñ‡•ã‡§ú‡•á‡§Ç
        </button>
      </div>
      <div id="bigSearchResults" class="search-results" style="margin-top: 20px;"></div>
    </section>

    <section class="dashboard-stats">
      <div class="stats-grid">
        <div class="stat-card pradhan-stat" onclick="showVillagesModal()">
          <div class="stat-header"><div class="stat-icon"><i class="fas fa-map"></i></div></div>
          <div class="stat-body"><h3 class="stat-number">12</h3><p class="stat-label">‡§ï‡•Å‡§≤ ‡§ó‡§æ‡§Ç‡§µ</p></div>
        </div>
        <div class="stat-card pradhan-stat" onclick="alert('‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£')">
          <div class="stat-header"><div class="stat-icon"><i class="fas fa-users"></i></div></div>
          <div class="stat-body"><h3 class="stat-number">8,456</h3><p class="stat-label">‡§ï‡•Å‡§≤ ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ</p></div>
        </div>
        <div class="stat-card pradhan-stat" onclick="showProjectsModal()">
          <div class="stat-header"><div class="stat-icon"><i class="fas fa-tools"></i></div></div>
          <div class="stat-body"><h3 class="stat-number">25</h3><p class="stat-label">‡§ö‡§æ‡§≤‡•Ç ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü</p></div>
        </div>
        <div class="stat-card pradhan-stat" onclick="alert('‡§¨‡§ú‡§ü ‡§µ‡§ø‡§µ‡§∞‡§£')">
          <div class="stat-header"><div class="stat-icon"><i class="fas fa-rupee-sign"></i></div></div>
          <div class="stat-body"><h3 class="stat-number">‚Çπ45.2L</h3><p class="stat-label">‡§ï‡•Å‡§≤ ‡§¨‡§ú‡§ü</p></div>
        </div>
        <div class="stat-card villager-stat" style="display: none;">
          <div class="stat-header"><div class="stat-icon"><i class="fas fa-chart-line"></i></div></div>
          <div class="stat-body"><h3 class="stat-number">8</h3><p class="stat-label">‡§Æ‡•á‡§∞‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ‡§è‡§Ç</p></div>
        </div>
        <div class="stat-card villager-stat" style="display: none;" onclick="showMyComplaintsModal()">
          <div class="stat-header"><div class="stat-icon"><i class="fas fa-exclamation-triangle"></i></div></div>
          <div class="stat-body"><h3 class="stat-number">3</h3><p class="stat-label">‡§Æ‡•á‡§∞‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•á‡§Ç</p></div>
        </div>
        <div class="stat-card villager-stat" style="display: none;">
          <div class="stat-header"><div class="stat-icon"><i class="fas fa-check-circle"></i></div></div>
          <div class="stat-body"><h3 class="stat-number">6</h3><p class="stat-label">‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ï‡§æ‡§∞‡•ç‡§Ø</p></div>
        </div>
        <div class="stat-card villager-stat" style="display: none;" onclick="showProjectsModal()">
          <div class="stat-header"><div class="stat-icon"><i class="fas fa-clock"></i></div></div>
          <div class="stat-body"><h3 class="stat-number">4</h3><p class="stat-label">‡§ö‡§æ‡§≤‡•Ç ‡§ï‡§æ‡§∞‡•ç‡§Ø</p></div>
        </div>
      </div>
    </section>

    <section class="dashboard-content pradhan-content">
      <div class="content-grid">
        <div class="dashboard-widget village-widget">
          <div class="widget-header">
            <h3 class="widget-title">‡§ó‡§æ‡§Ç‡§µ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®</h3>
            <button class="widget-action" onclick="openModal('addVillageModal')"><i class="fas fa-plus"></i></button>
          </div>
          <div class="widget-content"><div class="village-list"></div></div>
        </div>

        <div class="dashboard-widget resource-widget">
          <div class="widget-header">
            <h3 class="widget-title">‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®</h3>
            <button class="widget-action" onclick="openModal('addResourceModal')"><i class="fas fa-plus"></i></button>
          </div>
          <div class="widget-content"><div class="resource-grid"></div></div>
        </div>

        <div class="dashboard-widget complaints-widget">
          <div class="widget-header"><h3 class="widget-title">‡§π‡§æ‡§≤ ‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•á‡§Ç</h3></div>
          <div class="widget-content"><div class="complaints-list"></div></div>
        </div>

        <div class="dashboard-widget projects-widget">
          <div class="widget-header"><h3 class="widget-title">‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h3></div>
          <div class="widget-content"><div class="projects-list"></div></div>
        </div>
      </div>
    </section>

    <section class="dashboard-content villager-content" style="display: none;">
      <div class="quick-actions">
        <div class="actions-grid">
          <div class="action-card" onclick="openModal('reviewModal')">
            <div class="action-icon success"><i class="fas fa-thumbs-up"></i></div>
            <div class="action-content">
              <h3 class="action-title">‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ</h3>
              <p class="action-desc">‡§™‡•Ç‡§∞‡•á ‡§π‡•Å‡§è ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</p>
            </div>
          </div>
          <div class="action-card" onclick="openModal('complainModal')">
            <div class="action-icon warning"><i class="fas fa-exclamation-triangle"></i></div>
            <div class="action-content">
              <h3 class="action-title">‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</h3>
              <p class="action-desc">‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Data Modals -->
  <div class="data-modal" id="villagesDataModal">
    <div class="data-modal-content">
      <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
        <h2>‡§∏‡§≠‡•Ä ‡§ó‡§æ‡§Ç‡§µ</h2>
        <button class="close-btn" onclick="closeDataModal('villagesDataModal')"><i class="fas fa-times"></i></button>
      </div>
      <div id="villagesDataList" class="data-list"></div>
    </div>
  </div>

  <div class="data-modal" id="projectsDataModal">
    <div class="data-modal-content">
      <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
        <h2>‡§∏‡§≠‡•Ä ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç</h2>
        <button class="close-btn" onclick="closeDataModal('projectsDataModal')"><i class="fas fa-times"></i></button>
      </div>
      <div id="projectsDataList" class="data-list"></div>
    </div>
  </div>

  <div class="data-modal" id="complaintsDataModal">
    <div class="data-modal-content">
      <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
        <h2>‡§Æ‡•á‡§∞‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•á‡§Ç</h2>
        <button class="close-btn" onclick="closeDataModal('complaintsDataModal')"><i class="fas fa-times"></i></button>
      </div>
      <div id="complaintsDataList" class="data-list"></div>
    </div>
  </div>

  <!-- Resource Distribution Modal -->
  <div class="data-modal" id="resourceDistributionModal">
    <div class="data-modal-content">
      <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
        <h2 id="resourceDistributionTitle">‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§µ‡§ø‡§§‡§∞‡§£</h2>
        <button class="close-btn" onclick="closeDataModal('resourceDistributionModal')"><i class="fas fa-times"></i></button>
      </div>
      <div id="resourceDistributionContent"></div>
    </div>
  </div>
  <!-- Add Village Modal -->
  <div class="modal" id="addVillageModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>‡§®‡§Ø‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h3>
        <button class="close-btn" onclick="closeModal('addVillageModal')"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <form class="modal-form">
          <div class="form-row">
            <div class="form-group">
              <label>‡§ó‡§æ‡§Ç‡§µ ‡§ï‡§æ ‡§®‡§æ‡§Æ *</label>
              <input type="text" class="modal-input" id="villageName" required>
            </div>
            <div class="form-group">
              <label>‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•ã‡§° *</label>
              <input type="text" class="modal-input" id="villageCode" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ *</label>
              <input type="number" class="modal-input" id="villagePopulation" required>
            </div>
            <div class="form-group">
              <label>‡§ï‡•Å‡§≤ ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ *</label>
              <input type="number" class="modal-input" id="villageFamilies" required>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn secondary-btn" onclick="closeModal('addVillageModal')">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
        <button class="btn primary-btn" onclick="saveVillage()">‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
      </div>
    </div>
  </div>

  <!-- Add Resource Modal -->
  <div class="modal" id="addResourceModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>‡§®‡§Ø‡§æ ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h3>
        <button class="close-btn" onclick="closeModal('addResourceModal')"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <form class="modal-form">
          <div class="form-group">
            <label>‡§ó‡§æ‡§Ç‡§µ ‡§ö‡•Å‡§®‡•á‡§Ç *</label>
            <select class="modal-input" id="resourceVillage" required>
              <option value="">‡§ó‡§æ‡§Ç‡§µ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
            </select>
          </div>
          <div class="form-group">
            <label>‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ *</label>
            <select class="modal-input" id="resourceType" required>
              <option value="">‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
              <option value="WATER">‡§™‡§æ‡§®‡•Ä</option>
              <option value="ELECTRICITY">‡§¨‡§ø‡§ú‡§≤‡•Ä</option>
              <option value="ROAD">‡§∏‡§°‡§º‡§ï</option>
              <option value="HEALTH">‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø</option>
              <option value="EDUCATION">‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ</option>
            </select>
          </div>
          <div class="form-group">
            <label>‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ *</label>
            <input type="text" class="modal-input" id="resourceName" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>‡§ï‡•Å‡§≤ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ *</label>
              <input type="number" class="modal-input" id="resourceCount" required>
            </div>
            <div class="form-group">
              <label>‡§ï‡§µ‡§∞‡•á‡§ú % *</label>
              <input type="number" class="modal-input" id="resourceCoverage" required>
            </div>
          </div>
          <div class="form-group">
            <label>‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø *</label>
            <select class="modal-input" id="resourceQuality" required>
              <option value="GOOD">‡§Ö‡§ö‡•ç‡§õ‡§æ</option>
              <option value="AVERAGE">‡§î‡§∏‡§§</option>
              <option value="POOR">‡§ñ‡§∞‡§æ‡§¨</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn secondary-btn" onclick="closeModal('addResourceModal')">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
        <button class="btn primary-btn" onclick="saveResource()">‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç</button>
      </div>
    </div>
  </div>

  <!-- Village Details Modal -->
  <div class="modal" id="villageDetailsModal">
    <div class="modal-content large-modal">
      <div class="modal-header">
        <h3 id="villageDetailsTitle">‡§ó‡§æ‡§Ç‡§µ ‡§µ‡§ø‡§µ‡§∞‡§£</h3>
        <button class="close-btn" onclick="closeModal('villageDetailsModal')"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <div id="villageDetailsContent"></div>
      </div>
    </div>
  </div>

  <!-- Complaint Modal -->
  <div class="modal" id="complainModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</h3>
        <button class="close-btn" onclick="closeModal('complainModal')"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <form class="modal-form">
          <div class="form-group" id="complaintVillageInfo" style="display: none;">
            <label>‡§ö‡§Ø‡§®‡§ø‡§§ ‡§ó‡§æ‡§Ç‡§µ</label>
            <div id="selectedVillageDisplay" style="padding: 10px; background: #e8f5e9; border-radius: 5px; margin-bottom: 10px;">
              <strong id="selectedVillageName">‡§ï‡•ã‡§à ‡§ó‡§æ‡§Ç‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§ö‡•Å‡§®‡§æ ‡§ó‡§Ø‡§æ</strong>
            </div>
          </div>
          <div class="form-group">
            <label>‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ *</label>
            <select class="modal-input" id="complaintType" required>
              <option value="">‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç</option>
              <option value="WATER">‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ</option>
              <option value="ELECTRICITY">‡§¨‡§ø‡§ú‡§≤‡•Ä ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ</option>
              <option value="ROADS">‡§∏‡§°‡§º‡§ï ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ</option>
              <option value="SANITATION">‡§∏‡§´‡§æ‡§à ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ</option>
            </select>
          </div>
          <div class="form-group">
            <label>‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï *</label>
            <input type="text" class="modal-input" id="complaintTitle" required>
          </div>
          <div class="form-group">
            <label>‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£ *</label>
            <textarea class="modal-textarea" id="complaintDesc" required></textarea>
          </div>
          <div class="form-group">
            <label>‡§∏‡•ç‡§•‡§æ‡§®</label>
            <input type="text" class="modal-input" id="complaintLocation">
          </div>
          <div class="form-group">
            <label>‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§∏‡•ç‡§§‡§∞ *</label>
            <select class="modal-input" id="complaintPriority" required>
              <option value="MEDIUM">‡§Æ‡§ß‡•ç‡§Ø‡§Æ</option>
              <option value="LOW">‡§ï‡§Æ</option>
              <option value="HIGH">‡§â‡§ö‡•ç‡§ö</option>
              <option value="URGENT">‡§§‡•Å‡§∞‡§Ç‡§§</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn secondary-btn" onclick="closeModal('complainModal')">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
        <button class="btn primary-btn" onclick="submitComplaint()">‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</button>
      </div>
    </div>
  </div>

  <!-- Review Modal -->
  <div class="modal" id="reviewModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç</h3>
        <button class="close-btn" onclick="closeModal('reviewModal')"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-body">
        <form class="modal-form">
          <div class="form-group">
            <label>‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç *</label>
            <select class="modal-input" id="reviewProject" required>
              <option value="">‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç</option>
            </select>
          </div>
          <div class="form-group">
            <label>‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó *</label>
            <div class="rating-stars">
              <span class="star" data-rating="1">‚≠ê</span>
              <span class="star" data-rating="2">‚≠ê</span>
              <span class="star" data-rating="3">‚≠ê</span>
              <span class="star" data-rating="4">‚≠ê</span>
              <span class="star" data-rating="5">‚≠ê</span>
            </div>
          </div>
          <div class="form-group">
            <label>‡§ü‡§ø‡§™‡•ç‡§™‡§£‡•Ä</label>
            <textarea class="modal-textarea" id="reviewComments"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn secondary-btn" onclick="closeModal('reviewModal')">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
        <button class="btn primary-btn" onclick="submitReview()">‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç</button>
      </div>
    </div>
  </div>

  <script>
    const API_URL = 'http://localhost:3000/api';
    let selectedVillageId = null;
    let selectedVillageName = '';
    let currentMode = 'pradhan';

    document.addEventListener('DOMContentLoaded', async () => {
        await loadStats();
        await loadVillages();
        await loadComplaints();
        await loadProjects();
        await loadResources();
        await populateVillageDropdowns();
        await populateProjectDropdown();
        initializeRoleSwitcher();
        initializeUserMenu();
        initializeModals();
        initializeStarRating();
    });

    async function loadStats() {
        try {
            const response = await fetch(`${API_URL}/stats`);
            const data = await response.json();
            const statNumbers = document.querySelectorAll('.stat-number');
            if (statNumbers[0]) statNumbers[0].textContent = data.TOTAL_VILLAGES || 0;
            if (statNumbers[1]) statNumbers[1].textContent = (data.TOTAL_POPULATION || 0).toLocaleString();
            if (statNumbers[2]) statNumbers[2].textContent = data.ONGOING_PROJECTS || 0;
            if (statNumbers[3]) statNumbers[3].textContent = `‚Çπ${((data.TOTAL_BUDGET || 0)/100000).toFixed(1)}L`;
            if (statNumbers[4]) statNumbers[4].textContent = data.TOTAL_REVIEWS || 0;
            if (statNumbers[5]) statNumbers[5].textContent = data.TOTAL_COMPLAINTS || 0;
            if (statNumbers[6]) statNumbers[6].textContent = data.COMPLETED_PROJECTS || 0;
            if (statNumbers[7]) statNumbers[7].textContent = data.ONGOING_PROJECTS || 0;
        } catch (error) {
            console.log('Using defaults');
        }
    }

    async function loadVillages() {
        try {
            const response = await fetch(`${API_URL}/villages`);
            const villages = await response.json();
            const villageList = document.querySelector('.village-list');
            if (villageList && villages.length > 0) {
                villageList.innerHTML = '';
                villages.forEach(v => {
                    villageList.innerHTML += `
                        <div class="village-item" onclick="viewVillageDetails(${v.VILLAGE_ID})" style="cursor: pointer;">
                            <div class="village-info">
                                <h4 class="village-name">${v.VILLAGE_NAME}</h4>
                                <p class="village-details">‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ: ${v.POPULATION} | ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞: ${v.TOTAL_FAMILIES}</p>
                                <span class="status-badge success">${v.STATUS}</span>
                            </div>
                        </div>
                    `;
                });
            }
        } catch (error) {
            console.log('Using defaults');
        }
    }

    async function loadComplaints() {
        try {
            const response = await fetch(`${API_URL}/complaints`);
            const complaints = await response.json();
            const list = document.querySelector('.complaints-list');
            if (list && complaints.length > 0) {
                list.innerHTML = '';
                complaints.slice(0, 3).forEach(c => {
                    const priorityMap = {'URGENT': '‡§§‡•Å‡§∞‡§Ç‡§§', 'HIGH': '‡§â‡§ö‡•ç‡§ö', 'MEDIUM': '‡§Æ‡§ß‡•ç‡§Ø‡§Æ', 'LOW': '‡§ï‡§Æ'};
                    const statusColor = c.STATUS === 'RESOLVED' ? 'success' : c.STATUS === 'IN_PROGRESS' ? 'warning' : 'pending';
                    list.innerHTML += `
                        <div class="complaint-item ${c.PRIORITY_LEVEL.toLowerCase()}">
                            <div class="complaint-info">
                                <h4 class="complaint-title">${c.COMPLAINT_TITLE}</h4>
                                <p class="complaint-desc">${c.COMPLAINT_DESCRIPTION.substring(0, 40)}...</p>
                                <span class="complaint-time">${Math.round(c.HOURS_AGO)} ‡§ò‡§Ç‡§ü‡•á ‡§™‡§π‡§≤‡•á</span>
                                <span class="status-badge ${statusColor}">${c.STATUS}</span>
                            </div>
                            <div class="complaint-actions">
                                <span class="priority-badge ${c.PRIORITY_LEVEL.toLowerCase()}">${priorityMap[c.PRIORITY_LEVEL]}</span>
                                ${c.STATUS !== 'RESOLVED' ? `<button class="btn success-btn" onclick="resolveComplaint(${c.COMPLAINT_ID})">‡§π‡§≤ ‡§ï‡§∞‡•á‡§Ç</button>` : ''}
                            </div>
                        </div>
                    `;
                });
            }
        } catch (error) {
            console.log('Using defaults');
        }
    }

    async function loadProjects() {
        try {
            const response = await fetch(`${API_URL}/projects`);
            const projects = await response.json();
            const list = document.querySelector('.projects-list');
            if (list && projects.length > 0) {
                list.innerHTML = '';
                projects.slice(0, 2).forEach(p => {
                    list.innerHTML += `
                        <div class="project-item">
                            <div class="project-info">
                                <h4 class="project-title">${p.PROJECT_NAME}</h4>
                                <p class="project-location">${p.VILLAGE_NAME}</p>
                                <div class="project-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${p.COMPLETION_PERCENTAGE}%"></div>
                                    </div>
                                    <span class="progress-text">${p.COMPLETION_PERCENTAGE}%</span>
                                </div>
                            </div>
                            <div class="project-budget">
                                <span class="budget-amount">‚Çπ${(p.BUDGET_ALLOCATED/100000).toFixed(1)}L</span>
                            </div>
                        </div>
                    `;
                });
            }
        } catch (error) {
            console.log('Using defaults');
        }
    }

    async function loadResources() {
        try {
            const response = await fetch(`${API_URL}/resources`);
            const resources = await response.json();
            const groupedResources = {};
            resources.forEach(r => {
                if (!groupedResources[r.RESOURCE_TYPE]) {
                    groupedResources[r.RESOURCE_TYPE] = [];
                }
                groupedResources[r.RESOURCE_TYPE].push(r);
            });
            
            const grid = document.querySelector('.resource-grid');
            if (grid) {
                grid.innerHTML = '';
                Object.keys(groupedResources).forEach(type => {
                    const items = groupedResources[type];
                    const totalCount = items.reduce((sum, r) => sum + r.TOTAL_COUNT, 0);
                    const avgCoverage = (items.reduce((sum, r) => sum + r.COVERAGE_PERCENTAGE, 0) / items.length).toFixed(0);
                    const icons = {'WATER': 'tint', 'ELECTRICITY': 'bolt', 'ROAD': 'road', 'HEALTH': 'hospital', 'EDUCATION': 'school'};
                    const typeNames = {'WATER': '‡§™‡§æ‡§®‡•Ä', 'ELECTRICITY': '‡§¨‡§ø‡§ú‡§≤‡•Ä', 'ROAD': '‡§∏‡§°‡§º‡§ï', 'HEALTH': '‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø', 'EDUCATION': '‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ'};
                    grid.innerHTML += `
                        <div class="resource-card" onclick="showResourceDistribution('${type}')">
                            <div class="resource-icon ${type.toLowerCase()}">
                                <i class="fas fa-${icons[type] || 'check'}"></i>
                            </div>
                            <div class="resource-info">
                                <h4 class="resource-title">${typeNames[type] || type}</h4>
                                <p class="resource-count">${totalCount} ‡§ï‡•Å‡§≤ | ${items.length} ‡§ó‡§æ‡§Ç‡§µ</p>
                                <span class="resource-status good">${avgCoverage}% ‡§ï‡§µ‡§∞‡•á‡§ú</span>
                            </div>
                        </div>
                    `;
                });
            }
        } catch (error) {
            console.log('Using defaults');
        }
    }

    async function viewVillageDetails(villageId) {
        try {
            const response = await fetch(`${API_URL}/villages/${villageId}`);
            const data = await response.json();
            const village = data.village;
            const resources = data.resources;
            const complaints = data.complaints;
            const projects = data.projects;
            
            const statusMap = {'GOOD': '‡§Ö‡§ö‡•ç‡§õ‡§æ', 'AVERAGE': '‡§î‡§∏‡§§', 'POOR': '‡§ñ‡§∞‡§æ‡§¨'};
            const priorityMap = {'URGENT': '‡§§‡•Å‡§∞‡§Ç‡§§', 'HIGH': '‡§â‡§ö‡•ç‡§ö', 'MEDIUM': '‡§Æ‡§ß‡•ç‡§Ø‡§Æ', 'LOW': '‡§ï‡§Æ'};
            const iconMap = {'WATER': 'tint', 'ELECTRICITY': 'bolt', 'ROAD': 'road', 'HEALTH': 'hospital', 'EDUCATION': 'school'};
            
            let detailsHTML = `
                <div class="village-details">
                    <div class="detail-section">
                        <h4><i class="fas fa-info-circle"></i> ‡§Æ‡•Ç‡§≤ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <span class="detail-label">‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•ã‡§°</span>
                                <span class="detail-value">${village.VILLAGE_CODE}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ</span>
                                <span class="detail-value">${village.POPULATION.toLocaleString()}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">‡§ï‡•Å‡§≤ ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞</span>
                                <span class="detail-value">${village.TOTAL_FAMILIES}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">‡§∏‡•ç‡§•‡§ø‡§§‡§ø</span>
                                <span class="detail-value" style="color: #4caf50; font-size: 20px;">${village.STATUS}</span>
                            </div>
                        </div>
                    </div>

                    <div class="info-cards">
                        <div class="info-card">
                            <div class="info-card-header">
                                <h4 class="info-card-title"><i class="fas fa-layer-group"></i> ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® (${resources.length})</h4>
                            </div>
                            <div class="info-card-body">
                                ${resources.map(r => `
                                    <div class="info-row">
                                        <div style="display: flex; align-items: center; gap: 15px;">
                                            <div class="resource-icon-large ${r.RESOURCE_TYPE.toLowerCase()}">
                                                <i class="fas fa-${iconMap[r.RESOURCE_TYPE]}"></i>
                                            </div>
                                            <div class="info-row-main">
                                                <div style="font-weight: 700; font-size: 16px;">${r.RESOURCE_NAME}</div>
                                                <div style="color: #666; font-size: 13px;">${r.TOTAL_COUNT} ‡§∏‡•ç‡§∞‡•ã‡§§ | ${r.COVERAGE_PERCENTAGE}% ‡§ï‡§µ‡§∞‡•á‡§ú</div>
                                            </div>
                                        </div>
                                        <div class="info-row-badges">
                                            <span class="quality-badge ${r.QUALITY_STATUS.toLowerCase()}">${statusMap[r.QUALITY_STATUS]}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="info-card">
                            <div class="info-card-header">
                                <h4 class="info-card-title"><i class="fas fa-exclamation-circle"></i> ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•á‡§Ç (${complaints.length})</h4>
                            </div>
                            <div class="info-card-body">
                                ${complaints.slice(0, 5).map(c => `
                                    <div class="info-row">
                                        <div class="info-row-main">
                                            <div style="font-weight: 700;">${c.COMPLAINT_TITLE}</div>
                                            <div style="color: #666; font-size: 13px;">${c.COMPLAINT_DESCRIPTION.substring(0, 50)}...</div>
                                        </div>
                                        <div class="info-row-badges">
                                            <span class="priority-badge ${c.PRIORITY_LEVEL.toLowerCase()}">${priorityMap[c.PRIORITY_LEVEL]}</span>
                                            <span class="status-badge ${c.STATUS === 'RESOLVED' ? 'success' : 'warning'}">${c.STATUS}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>

                        <div class="info-card">
                            <div class="info-card-header">
                                <h4 class="info-card-title"><i class="fas fa-tasks"></i> ‡§™‡§∞‡§ø‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç (${projects.length})</h4>
                            </div>
                            <div class="info-card-body">
                                ${projects.map(p => `
                                    <div class="info-row">
                                        <div class="info-row-main">
                                            <div style="font-weight: 700;">${p.PROJECT_NAME}</div>
                                            <div style="color: #666; font-size: 13px;">‡§¨‡§ú‡§ü: ‚Çπ${(p.BUDGET_ALLOCATED/100000).toFixed(1)}L | ‡§ñ‡§∞‡•ç‡§ö: ‚Çπ${(p.BUDGET_SPENT/100000).toFixed(1)}L</div>
                                        </div>
                                        <div class="info-row-badges">
                                            <span style="background: #e3f2fd; color: #1976d2; padding: 6px 14px; border-radius: 20px; font-weight: 600; font-size: 13px;">${p.COMPLETION_PERCENTAGE}% ‡§™‡•Ç‡§∞‡•ç‡§£</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('villageDetailsTitle').textContent = `${village.VILLAGE_NAME} - ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä`;
            document.getElementById('villageDetailsContent').innerHTML = detailsHTML;
            openModal('villageDetailsModal');
        } catch (error) {
            alert('Error: ' + error.message);
        }
    }


    async function showResourceDistribution(resourceType) {
        try {
            const response = await fetch(`${API_URL}/resources`);
            const allResources = await response.json();
            const filtered = allResources.filter(r => r.RESOURCE_TYPE === resourceType);
            
            const villagesResponse = await fetch(`${API_URL}/villages`);
            const villages = await villagesResponse.json();
            const villageMap = {};
            villages.forEach(v => {
                villageMap[v.VILLAGE_ID] = v.VILLAGE_NAME;
            });
            
            const typeNames = {'WATER': '‡§™‡§æ‡§®‡•Ä', 'ELECTRICITY': '‡§¨‡§ø‡§ú‡§≤‡•Ä', 'ROAD': '‡§∏‡§°‡§º‡§ï', 'HEALTH': '‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø', 'EDUCATION': '‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ'};
            const totalCount = filtered.reduce((sum, r) => sum + r.TOTAL_COUNT, 0);
            const avgCoverage = (filtered.reduce((sum, r) => sum + r.COVERAGE_PERCENTAGE, 0) / filtered.length).toFixed(0);
            const goodQuality = filtered.filter(r => r.QUALITY_STATUS === 'GOOD').length;
            const statusMap = {'GOOD': '‡§Ö‡§ö‡•ç‡§õ‡§æ', 'AVERAGE': '‡§î‡§∏‡§§', 'POOR': '‡§ñ‡§∞‡§æ‡§¨'};
            
            let distributionHTML = `
                <div class="resource-distribution">
                    <div class="distribution-header">
                        <h2>${typeNames[resourceType]} - ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§µ‡§ø‡§§‡§∞‡§£</h2>
                        <p>${filtered.length} ‡§ó‡§æ‡§Ç‡§µ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§â‡§™‡§≤‡§¨‡•ç‡§ß</p>
                    </div>
                    
                    <div class="distribution-stats">
                        <div class="distribution-stat">
                            <div class="distribution-stat-label">‡§ï‡•Å‡§≤ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ</div>
                            <div class="distribution-stat-number">${totalCount}</div>
                        </div>
                        <div class="distribution-stat">
                            <div class="distribution-stat-label">‡§î‡§∏‡§§ ‡§ï‡§µ‡§∞‡•á‡§ú</div>
                            <div class="distribution-stat-number">${avgCoverage}%</div>
                        </div>
                        <div class="distribution-stat">
                            <div class="distribution-stat-label">‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ</div>
                            <div class="distribution-stat-number">${goodQuality}</div>
                        </div>
                        <div class="distribution-stat">
                            <div class="distribution-stat-label">‡§ï‡•Å‡§≤ ‡§ó‡§æ‡§Ç‡§µ</div>
                            <div class="distribution-stat-number">${filtered.length}</div>
                        </div>
                    </div>
                    
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h3 style="margin-bottom: 20px; color: #333;">‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£</h3>
                        <table class="resource-distribution-table">
                            <thead>
                                <tr>
                                    <th>‡§ó‡§æ‡§Ç‡§µ ‡§ï‡§æ ‡§®‡§æ‡§Æ</th>
                                    <th>‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ</th>
                                    <th style="text-align: center;">‡§ï‡•Å‡§≤ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ</th>
                                    <th style="text-align: center;">‡§ï‡§µ‡§∞‡•á‡§ú %</th>
                                    <th style="text-align: center;">‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${filtered.map(r => `
                                    <tr>
                                        <td style="font-weight: 600; color: #333;">${villageMap[r.VILLAGE_ID] || 'Unknown'}</td>
                                        <td style="color: #666;">${r.RESOURCE_NAME}</td>
                                        <td style="text-align: center; font-weight: 700; color: #2196F3; font-size: 18px;">${r.TOTAL_COUNT}</td>
                                        <td style="text-align: center;">
                                            <div style="background: #e3f2fd; display: inline-block; padding: 8px 16px; border-radius: 20px; font-weight: 600; color: #1976d2;">
                                                ${r.COVERAGE_PERCENTAGE}%
                                            </div>
                                        </td>
                                        <td style="text-align: center;">
                                            <span class="quality-badge ${r.QUALITY_STATUS.toLowerCase()}">${statusMap[r.QUALITY_STATUS]}</span>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            
            document.getElementById('resourceDistributionTitle').textContent = `${typeNames[resourceType]} ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§µ‡§ø‡§§‡§∞‡§£`;
            document.getElementById('resourceDistributionContent').innerHTML = distributionHTML;
            document.getElementById('resourceDistributionModal').classList.add('active');
        } catch (error) {
            alert('Error: ' + error.message);
        }
    }

    async function showVillagesModal() {
        try {
            const response = await fetch(`${API_URL}/villages`);
            const villages = await response.json();
            const list = document.getElementById('villagesDataList');
            list.innerHTML = '';
            villages.forEach(v => {
                list.innerHTML += `
                    <div class="data-item" onclick="viewVillageDetails(${v.VILLAGE_ID}); closeDataModal('villagesDataModal')">
                        <h3>${v.VILLAGE_NAME}</h3>
                        <p>‡§ï‡•ã‡§°: ${v.VILLAGE_CODE} | ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ: ${v.POPULATION} | ‡§™‡§∞‡§ø‡§µ‡§æ‡§∞: ${v.TOTAL_FAMILIES}</p>
                        <span class="status-badge success">${v.STATUS}</span>
                    </div>
                `;
            });
            document.getElementById('villagesDataModal').classList.add('active');
        } catch (error) {
            alert('Error: ' + error.message);
        }
    }

    async function showProjectsModal() {
        try {
            const response = await fetch(`${API_URL}/projects`);
            const projects = await response.json();
            const list = document.getElementById('projectsDataList');
            list.innerHTML = '';
            projects.forEach(p => {
                list.innerHTML += `
                    <div class="data-item">
                        <h3>${p.PROJECT_NAME}</h3>
                        <p>‡§ó‡§æ‡§Ç‡§µ: ${p.VILLAGE_NAME} | ‡§¨‡§ú‡§ü: ‚Çπ${(p.BUDGET_ALLOCATED/100000).toFixed(1)}L | ‡§™‡•Ç‡§∞‡•ç‡§£‡§§‡§æ: ${p.COMPLETION_PERCENTAGE}%</p>
                        <span class="status-badge ${p.PROJECT_STATUS === 'IN_PROGRESS' ? 'warning' : 'success'}">${p.PROJECT_STATUS}</span>
                    </div>
                `;
            });
            document.getElementById('projectsDataModal').classList.add('active');
        } catch (error) {
            alert('Error: ' + error.message);
        }
    }

    async function showMyComplaintsModal() {
        try {
            const response = await fetch(`${API_URL}/complaints`);
            const complaints = await response.json();
            const list = document.getElementById('complaintsDataList');
            list.innerHTML = '';
            complaints.forEach(c => {
                const priorityMap = {'URGENT': '‡§§‡•Å‡§∞‡§Ç‡§§', 'HIGH': '‡§â‡§ö‡•ç‡§ö', 'MEDIUM': '‡§Æ‡§ß‡•ç‡§Ø‡§Æ', 'LOW': '‡§ï‡§Æ'};
                list.innerHTML += `
                    <div class="data-item">
                        <h3>${c.COMPLAINT_TITLE}</h3>
                        <p>${c.COMPLAINT_DESCRIPTION}</p>
                        <p>‡§∏‡•ç‡§•‡§æ‡§®: ${c.LOCATION} | ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ: ${priorityMap[c.PRIORITY_LEVEL]}</p>
                        <span class="status-badge ${c.STATUS === 'RESOLVED' ? 'success' : 'warning'}">${c.STATUS}</span>
                    </div>
                `;
            });
            document.getElementById('complaintsDataModal').classList.add('active');
        } catch (error) {
            alert('Error: ' + error.message);
        }
    }

    function closeDataModal(modalId) {
        document.getElementById(modalId).classList.remove('active');
    }

    async function bigSearchVillage() {
        const query = document.getElementById('bigVillageSearch').value.trim();
        if (!query) {
            alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
            return;
        }
        try {
            const response = await fetch(`${API_URL}/villages/search/${query}`);
            const villages = await response.json();
            const resultsDiv = document.getElementById('bigSearchResults');
            if (villages.length === 0) {
                resultsDiv.innerHTML = '<p style="text-align: center; padding: 20px; background: #fff3cd; border-radius: 8px;">‡§ï‡•ã‡§à ‡§ó‡§æ‡§Ç‡§µ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ</p>';
                return;
            }
            resultsDiv.innerHTML = `<div>${villages.map(v => `
                <div onclick="selectVillageForComplaint(${v.VILLAGE_ID}, '${v.VILLAGE_NAME}')" style="background: white; padding: 20px; border-radius: 8px; margin: 10px 0; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="margin: 0 0 10px 0;">${v.VILLAGE_NAME}</h3>
                        <p style="margin: 0; color: #666;">‡§ï‡•ã‡§°: ${v.VILLAGE_CODE} | ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ: ${v.POPULATION}</p>
                    </div>
                    <button class="btn primary-btn">‡§ö‡•Å‡§®‡•á‡§Ç</button>
                </div>
            `).join('')}</div>`;
        } catch (error) {
            alert('Error: ' + error.message);
        }
    }

    function selectVillageForComplaint(villageId, villageName) {
        selectedVillageId = villageId;
        selectedVillageName = villageName;
        document.getElementById('bigSearchResults').innerHTML = `
            <div style="padding: 20px; background: #e8f5e9; border-radius: 8px; margin-top: 15px; text-align: center;">
                <p style="margin: 0; color: #2e7d32; font-weight: 600; font-size: 18px;">‚úì ‡§ö‡§Ø‡§®‡§ø‡§§ ‡§ó‡§æ‡§Ç‡§µ: ${villageName}</p>
                <button class="btn primary-btn" onclick="openModal('complainModal')" style="margin-top: 15px;">‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
        `;
    }

    async function saveVillage() {
        const name = document.getElementById('villageName').value.trim();
        const code = document.getElementById('villageCode').value.trim();
        const population = document.getElementById('villagePopulation').value;
        const families = document.getElementById('villageFamilies').value;
        if (!name || !code || !population || !families) {
            alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç!');
            return;
        }
        try {
            const response = await fetch(`${API_URL}/villages`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ village_name: name, village_code: code, population: parseInt(population), total_families: parseInt(families) })
            });
            const result = await response.json();
            if (result.success) {
                alert('‚úÖ ' + result.message);
                closeModal('addVillageModal');
                document.getElementById('villageName').value = '';
                document.getElementById('villageCode').value = '';
                document.getElementById('villagePopulation').value = '';
                document.getElementById('villageFamilies').value = '';
                await loadVillages();
                await loadStats();
                await populateVillageDropdowns();
            } else {
                alert('‚ùå Error: ' + result.error);
            }
        } catch (error) {
            alert('‚ùå Error: ' + error.message);
        }
    }

    async function saveResource() {
        const villageId = document.getElementById('resourceVillage').value;
        const type = document.getElementById('resourceType').value;
        const name = document.getElementById('resourceName').value.trim();
        const count = document.getElementById('resourceCount').value;
        const coverage = document.getElementById('resourceCoverage').value;
        const quality = document.getElementById('resourceQuality').value;
        if (!villageId || !type || !name || !count || !coverage || !quality) {
            alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç!');
            return;
        }
        try {
            const response = await fetch(`${API_URL}/resources`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ village_id: parseInt(villageId), resource_type: type, resource_name: name, total_count: parseInt(count), coverage_percentage: parseFloat(coverage), quality_status: quality })
            });
            const result = await response.json();
            if (result.success) {
                alert('‚úÖ ' + result.message);
                closeModal('addResourceModal');
                document.getElementById('resourceVillage').value = '';
                document.getElementById('resourceType').value = '';
                document.getElementById('resourceName').value = '';
                document.getElementById('resourceCount').value = '';
                document.getElementById('resourceCoverage').value = '';
                await loadResources();
            } else {
                alert('‚ùå Error: ' + result.error);
            }
        } catch (error) {
            alert('‚ùå Error: ' + error.message);
        }
    }

    async function submitComplaint() {
        const type = document.getElementById('complaintType').value;
        const title = document.getElementById('complaintTitle').value.trim();
        const desc = document.getElementById('complaintDesc').value.trim();
        const location = document.getElementById('complaintLocation').value.trim();
        const priority = document.getElementById('complaintPriority').value;
        if (!type || !title || !desc) {
            alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç!');
            return;
        }
        if (currentMode === 'villager' && !selectedVillageId) {
            alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§Ö‡§™‡§®‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ñ‡•ã‡§ú‡•á‡§Ç ‡§î‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç!');
            closeModal('complainModal');
            return;
        }
        const villageId = selectedVillageId || 1;
        try {
            const response = await fetch(`${API_URL}/complaints`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ village_id: villageId, complaint_type: type, complaint_title: title, complaint_description: desc, location, priority_level: priority })
            });
            const result = await response.json();
            if (result.success) {
                alert('‚úÖ ' + result.message);
                closeModal('complainModal');
                document.getElementById('complaintType').value = '';
                document.getElementById('complaintTitle').value = '';
                document.getElementById('complaintDesc').value = '';
                document.getElementById('complaintLocation').value = '';
                await loadComplaints();
                await loadStats();
            } else {
                alert('‚ùå Error: ' + result.error);
            }
        } catch (error) {
            alert('‚ùå Error: ' + error.message);
        }
    }

    async function submitReview() {
        const project = document.getElementById('reviewProject').value;
        const comments = document.getElementById('reviewComments').value.trim();
        const rating = document.querySelectorAll('.star.selected').length || 5;
        if (!project) {
            alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç!');
            return;
        }
        try {
            const response = await fetch(`${API_URL}/reviews`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ project_id: parseInt(project), quality_rating: rating, review_comments: comments })
            });
            const result = await response.json();
            if (result.success) {
                alert('‚úÖ ' + result.message);
                closeModal('reviewModal');
                document.getElementById('reviewProject').value = '';
                document.getElementById('reviewComments').value = '';
                document.querySelectorAll('.star').forEach(s => { s.classList.remove('selected'); s.style.color = '#e0e0e0'; });
                await loadStats();
            } else {
                alert('‚ùå Error: ' + result.error);
            }
        } catch (error) {
            alert('‚ùå Error: ' + error.message);
        }
    }

    async function resolveComplaint(complaintId) {
        if (!confirm('‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§á‡§∏ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡•ã ‡§π‡§≤ ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§ö‡§ø‡§π‡•ç‡§®‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?')) return;
        try {
            const response = await fetch(`${API_URL}/complaints/${complaintId}/resolve`, { method: 'PUT' });
            const result = await response.json();
            if (result.success) {
                alert('‚úÖ ' + result.message);
                await loadComplaints();
                await loadStats();
            } else {
                alert('‚ùå Error: ' + result.error);
            }
        } catch (error) {
            alert('‚ùå Error: ' + error.message);
        }
    }

    async function populateVillageDropdowns() {
        try {
            const response = await fetch(`${API_URL}/villages`);
            const villages = await response.json();
            const resourceVillage = document.getElementById('resourceVillage');
            villages.forEach(v => {
                if (resourceVillage) resourceVillage.innerHTML += `<option value="${v.VILLAGE_ID}">${v.VILLAGE_NAME}</option>`;
            });
        } catch (error) {
            console.log('Error loading villages');
        }
    }

    async function populateProjectDropdown() {
        try {
            const response = await fetch(`${API_URL}/projects`);
            const projects = await response.json();
            const reviewProject = document.getElementById('reviewProject');
            if (reviewProject) {
                reviewProject.innerHTML = '<option value="">‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç</option>';
                projects.forEach(p => reviewProject.innerHTML += `<option value="${p.PROJECT_ID}">${p.PROJECT_NAME} - ${p.VILLAGE_NAME}</option>`);
            }
        } catch (error) {
            console.log('Error loading projects');
        }
    }

    function initializeRoleSwitcher() {
        const roleInputs = document.querySelectorAll('input[name="dashboardMode"]');
        const switcherThumb = document.querySelector('.switcher-thumb');
        roleInputs.forEach((input, index) => {
            input.addEventListener('change', () => {
                if(switcherThumb) switcherThumb.style.transform = `translateX(${index * 100}%)`;
                switchDashboardMode(input.value);
                document.querySelectorAll('.switcher-label').forEach(label => label.classList.remove('active'));
                input.nextElementSibling.classList.add('active');
            });
        });
        if(switcherThumb) switcherThumb.style.transform = 'translateX(0%)';
        if(roleInputs[0]) roleInputs[0].nextElementSibling.classList.add('active');
    }

    function switchDashboardMode(mode) {
        currentMode = mode;
        const pradhanContent = document.querySelector('.pradhan-content');
        const villagerContent = document.querySelector('.villager-content');
        const pradhanStats = document.querySelectorAll('.pradhan-stat');
        const villagerStats = document.querySelectorAll('.villager-stat');
        const bigSearchSection = document.getElementById('bigSearchSection');
        const welcomeTitle = document.getElementById('welcomeTitle');
        const welcomeSubtitle = document.getElementById('welcomeSubtitle');
        const primaryActionText = document.getElementById('primaryActionText');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');

        if (mode === 'pradhan') {
            if(pradhanContent) pradhanContent.style.display = 'block';
            if(villagerContent) villagerContent.style.display = 'none';
            if(bigSearchSection) bigSearchSection.style.display = 'none';
            pradhanStats.forEach(s => s.style.display = 'block');
            villagerStats.forEach(s => s.style.display = 'none');
            welcomeTitle.textContent = '‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§™‡•ç‡§∞‡§ß‡§æ‡§® ‡§ú‡•Ä! üôè';
            welcomeSubtitle.textContent = '‡§Ü‡§™‡§ï‡•á ‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§î‡§∞ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°';
            primaryActionText.textContent = '‡§®‡§Ø‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç';
            userAvatar.innerHTML = '<i class="fas fa-crown"></i>';
            userName.textContent = '‡§™‡•ç‡§∞‡§ß‡§æ‡§® ‡§ú‡•Ä';
        } else {
            if(pradhanContent) pradhanContent.style.display = 'none';
            if(villagerContent) villagerContent.style.display = 'block';
            if(bigSearchSection) bigSearchSection.style.display = 'block';
            pradhanStats.forEach(s => s.style.display = 'none');
            villagerStats.forEach(s => s.style.display = 'block');
            welcomeTitle.textContent = '‡§®‡§Æ‡§∏‡•ç‡§§‡•á! üôè';
            welcomeSubtitle.textContent = '‡§Ö‡§™‡§®‡•á ‡§ó‡§æ‡§Ç‡§µ ‡§ï‡•Ä ‡§∏‡•á‡§µ‡§æ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à';
            primaryActionText.textContent = '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç';
            userAvatar.innerHTML = '<i class="fas fa-user"></i>';
            userName.textContent = '‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£';
        }
    }

    function handlePrimaryAction() {
        if (currentMode === 'pradhan') {
            openModal('addVillageModal');
        } else {
            if (!selectedVillageId) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ä‡§™‡§∞ ‡§∏‡•á ‡§Ö‡§™‡§®‡§æ ‡§ó‡§æ‡§Ç‡§µ ‡§ñ‡•ã‡§ú‡•á‡§Ç ‡§î‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç!');
                return;
            }
            openModal('complainModal');
        }
    }

    function openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (!modal) return;
        if (modalId === 'complainModal') {
            const villageInfo = document.getElementById('complaintVillageInfo');
            const villageNameDisplay = document.getElementById('selectedVillageName');
            if (currentMode === 'villager' && selectedVillageId) {
                if (villageInfo) villageInfo.style.display = 'block';
                if (villageNameDisplay) villageNameDisplay.textContent = selectedVillageName;
            } else {
                if (villageInfo) villageInfo.style.display = 'none';
            }
        }
        modal.classList.add('active');
    }

    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (!modal) return;
        modal.classList.remove('active');
    }

    function initializeModals() {
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal') || e.target.classList.contains('data-modal')) {
                e.target.classList.remove('active');
            }
        });
    }

    function initializeStarRating() {
        const stars = document.querySelectorAll('.star');
        stars.forEach((star, index) => {
            star.addEventListener('click', function() {
                const rating = parseInt(this.getAttribute('data-rating'));
                stars.forEach((s, i) => {
                    if (i < rating) {
                        s.classList.add('selected');
                        s.style.color = '#ffc107';
                    } else {
                        s.classList.remove('selected');
                        s.style.color = '#e0e0e0';
                    }
                });
            });
        });
    }

    function initializeUserMenu() {
        const userMenuBtn = document.getElementById('userMenuBtn');
        const userDropdown = document.getElementById('userDropdown');
        if (userMenuBtn && userDropdown) {
            userMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                userDropdown.classList.toggle('active');
            });
            document.addEventListener('click', () => {
                userDropdown.classList.remove('active');
            });
        }
    }

    console.log('‚úÖ ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∏‡•á‡§µ‡§æ Professional Dashboard Ready');
  </script>
</body>
</html>
